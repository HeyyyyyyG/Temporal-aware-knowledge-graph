<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="./echarts.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1500px;height:800px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
    var categories = [{name:2013},{name:2014},{name:2015},{name:2016},{name:2017},{name:2018},{name:2019}];

    var listdata = [];
    var links = [];

    var nodes1=["珠三角产业转移",
"大型养殖企业的存栏量提升",
"油厂挺粕影响",
"养殖利润可能继续下滑",
"豆粕短期需求将减弱",
"精矿供给增加",
"债券市场由小牛市走向熊市",
"货币政策与金融监管政策的协调",
"我国金融抑制的背景下，可比国债收益率受到低估",
"好于预期的美国就业数据刺激美元上涨",
"国内市场减产",
"冶炼费用的提高",
"铜矿产量的提高",
"冶炼企业开工率高企",
"对冲去产能、去",
"产业链去利润较为彻底",
"供应回升，而需求走弱，形成供需剪刀差",
"期货暴跌",
"天然气及煤炭价格",
"先进产能释放",
"美元走强",
"新兴市场国家货币崩溃",
"来使得原油需",
"库存高位积累",
"效果，油价上行缺",
"OPEC减产和页岩油大",
"华盛顿对伊朗最大的石油买家进行意外慷慨的制裁豁免",
"市场愈发担心石油需求前景",
"竞争对手黑海地区供不应求",
"可可、小麦领涨国际农产品市场伦敦可可价格在2018年上涨了近30%",
"中小养殖主体迁移到广西",
"农村散养户的退出",
"价格回落",
"今年铜过剩压力有所缓解",
"市场利率上升",
"带动全社会资金成本中枢上移",
"伦铅在前高处遇阻回落",
"过剩压力明显减轻",
"预期今年铜价面临下行的压力",
"铜供给大于需求",
"央行通过货币政策工具不断向市场输入流动性",
"产业链基本处于供需平衡状态",
"PTA价格再度走",
"PTA工厂现金流恶",
"甲醇成本的高低，而油价的影响相对薄弱",
"行业集中度提高",
"非法产能受到严厉打压",
"供应紧平衡",
"金银受挫",
"金价新一轮上涨行情",
"美国库存下降",
"掉头大幅下跌",
"油市供应较为均衡",
"油价高位振荡",
"两大市场年度跌幅接近或超过20%",
"油价迅速抹去2018年内的全部涨幅并转跌",
"全年上涨近20%",
"投机性资金流入"]

    var nodes2=["2013",
"2013",
"2013",
"2013",
"2013",
"2014",
"2014",
"2014",
"2014",
"2015",
"2015",
"2015",
"2015",
"2015",
"2016",
"2016",
"2016",
"2016",
"2016",
"2017",
"2017",
"2017",
"2018",
"2018",
"2018",
"2018",
"2019",
"2019",
"2019",
"2019",
"2013",
"2013",
"2013",
"2014",
"2014",
"2014",
"2015",
"2015",
"2015",
"2015",
"2016",
"2016",
"2016",
"2016",
"2016",
"2017",
"2017",
"2017",
"2017",
"2017",
"2018",
"2018",
"2018",
"2018",
"2019",
"2019",
"2019",
"2019"]
    
    var links1=["珠三角产业转移",
"大型养殖企业的存栏量提升",
"油厂挺粕影响",
"养殖利润可能继续下滑",
"豆粕短期需求将减弱",
"精矿供给增加",
"精矿供给增加",
"债券市场由小牛市走向熊市",
"货币政策与金融监管政策的协调",
"我国金融抑制的背景下，可比国债收益率受到低估",
"好于预期的美国就业数据刺激美元上涨",
"国内市场减产",
"冶炼费用的提高",
"铜矿产量的提高",
"冶炼企业开工率高企",
"对冲去产能、去",
"产业链去利润较为彻底",
"供应回升，而需求走弱，形成供需剪刀差",
"期货暴跌",
"天然气及煤炭价格",
"先进产能释放",
"先进产能释放",
"先进产能释放",
"美元走强",
"新兴市场国家货币崩溃",
"来使得原油需",
"库存高位积累",
"效果，油价上行缺",
"OPEC减产和页岩油大",
"OPEC减产和页岩油大",
"华盛顿对伊朗最大的石油买家进行意外慷慨的制裁豁免",
"市场愈发担心石油需求前景",
"市场愈发担心石油需求前景",
"竞争对手黑海地区供不应求",
"可可、小麦领涨国际农产品市场伦敦可可价格在2018年上涨了近30%",
"华盛顿对伊朗最大的石油买家进行意外慷慨的制裁豁免",
"我国金融抑制的背景下，可比国债收益率受到低估",
"价格回落",
"我国金融抑制的背景下，可比国债收益率受到低估",
"行业集中度提高"]
    
    var links2=["中小养殖主体迁移到广西",
"农村散养户的退出",
"价格回落",
"价格回落",
"价格回落",
"今年铜过剩压力有所缓解",
"今年铜过剩压力有所缓解",
"市场利率上升",
"市场利率上升",
"带动全社会资金成本中枢上移",
"伦铅在前高处遇阻回落",
"过剩压力明显减轻",
"预期今年铜价面临下行的压力",
"预期今年铜价面临下行的压力",
"铜供给大于需求",
"央行通过货币政策工具不断向市场输入流动性",
"产业链基本处于供需平衡状态",
"PTA价格再度走",
"PTA工厂现金流恶",
"甲醇成本的高低，而油价的影响相对薄弱",
"行业集中度提高",
"非法产能受到严厉打压",
"供应紧平衡",
"金银受挫",
"金价新一轮上涨行情",
"美国库存下降",
"掉头大幅下跌",
"掉头大幅下跌",
"油市供应较为均衡",
"油价高位振荡",
"两大市场年度跌幅接近或超过20%",
"油价迅速抹去2018年内的全部涨幅并转跌",
"两大市场年度跌幅接近或超过20%",
"全年上涨近20%",
"投机性资金流入",
"油价迅速抹去2018年内的全部涨幅并转跌",
"央行通过货币政策工具不断向市场输入流动性",
"货币政策与金融监管政策的协调",
"供应回升，而需求走弱，形成供需剪刀差",
"投机性资金流入"]

            for (var i = 0; i < nodes1.length; i++) {
                listdata.push({
                    "name": nodes1[i],
                    "category": parseInt(nodes2[i])-2013,
                    "draggable": "true"
                })
            }
 
            for (var i = 0; i < links1.length; i++) {
                links.push({
                    "source": links1[i],
                    "target": links2[i],
                    lineStyle: {
                        normal: {
                            color: 'source',
                        }
                    }
                })
            }

    option = {
        // 图的标题
        title: {
            text: 'ECharts 关系图'
        },
        // 提示框的配置
        tooltip: {
            formatter: function (x) {
                return x.data.des;
            }
        },
        // 工具箱
        toolbox: {
            // 显示工具箱
            show: true,
            feature: {
                mark: {
                    show: true
                },
                // 还原
                restore: {
                    show: true
                },
                // 保存为图片
                saveAsImage: {
                    show: true
                }
            }
        },
        legend: [{
            // selectedMode: 'single',
            data: categories.map(function (a) {
                return a.name;
            })
        }],
        series: [{
            type: 'graph', // 类型:关系图
            layout: 'force', //图的布局，类型为力导图
            symbolSize: 40, // 调整节点的大小
            roam: true, // 是否开启鼠标缩放和平移漫游。默认不开启。如果只想要开启缩放或者平移,可以设置成 'scale' 或者 'move'。设置成 true 为都开启
            edgeSymbol: ['circle', 'arrow'],
            edgeSymbolSize: [2, 10],
            edgeLabel: {
                normal: {
                    textStyle: {
                        fontSize: 20
                    }
                }
            },
            force: {
                repulsion: 1000,
                edgeLength: [10, 50]
            },
            draggable: true,
            lineStyle: {
                normal: {
                    width: 2,
                    color: '#4b565b',
                }
            },
            edgeLabel: {
                normal: {
                    show: false,
                    formatter: function (x) {
                        return x.data.name;
                    }
                }
            },
            label: {
                normal: {
                    show: false,
                    position: 'inside',
                    formatter: '{b}',
                    fontSize: 16,
                    fontStyle: '600',
                }
            },
 
            // 数据
            data: listdata,
            links: links,
            categories: categories,
        }]
    };
    myChart.setOption(option);
    </script>
</body>
</html>